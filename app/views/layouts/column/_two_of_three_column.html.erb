<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v2.1.2/mapbox.css' rel='stylesheet' />

<div id='map'></div>

<script>
  L.mapbox.accessToken = 'pk.eyJ1IjoibGtiZ2lmdCIsImEiOiJyTERaTml3In0.y2wd_Fi58ux53Wm1Ur1qCg';
</script>

<script>
var geojson = [
  <% @graffitis.each do |graffiti| %>
    <% if graffiti.location_lon %>
      {
        "type": "Feature",
        "geometry": {
          "type": "Point",
          "coordinates": [<%= graffiti.location_lon %>, <%= graffiti.location_lat %>]
        },
        "properties": {
          "title": "Mapbox SF",
          "description": "155 9th St, San Francisco",
          "marker-color": "#fc4353",
          "marker-size": "large",
          "marker-symbol": "harbor"
        }
      },
    <% end %>
  <% end %>
];
</script>

<script>
  L.mapbox.map('map', 'examples.map-i86nkdio')
  .setView([37.8, -96], 4)
  .featureLayer.setGeoJSON(geojson);
</script>

<div class="row">
  <%= will_paginate @graffitis %>
</div>
